<!-- include header -->
<%- include('include/_header') %>
<!-- /include header -->

<!-- Main Site -->
<main></main>

<!-- /Main Site -->
<div class="bottom-name">
  <b
    ><%- student.first_name %> <%- student.last_name %><br /><%- student.id
    %></b
  >
  <div>
    <div class="barcode">
      <img
        class="logo"
        src="/img/NNHS_TICKET_LOGO.png"
        alt="Graduation ticket"
      />
      <!-- <div class="bottom-name"><%- student.first_name %><div> -->
      <!-- <div class="bottom-id"><b><%- student.id %></b></div> -->
    </div>
    <div class="barcode" style="width: 400px; margin: 0 auto">
      <svg id="tbarcode"></svg>
      <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.4/dist/JsBarcode.all.min.js"></script>
      <script>
        JsBarcode("#tbarcode", "<%- ticket.barcode %>", {
          displayValue: false,
        });
      </script>
    </div>

    <!-- Display Ticket Status Without Showing Access Codes -->
    <div class="access-codes" style="text-align: center; margin-top: 20px">
      <h3>Ticket Status:</h3>
      <% student.tickets.forEach(function(ticketItem, index) { %>
      <p style="font-size: 18px; font-weight: bold">
        Ticket <%= index + 1 %> - <% if (!ticketItem.time_scanned) { %>
        <span style="color: green">✅ Valid</span>
        <% } else { %>
        <span style="color: red">❌ Already Scanned</span>
        <br />
        <small>
          Last Scanned: <%- new Date(ticketItem.time_scanned).toLocaleString()
          %>
        </small>
        <% } %>
      </p>
      <% }); %>
    </div>

    <!-- include footer -->
    <!-- <%- include('include/_footer') %> -->
    <!-- /include footer -->
  </div>
</div>
