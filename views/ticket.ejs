<!-- include header -->
<%- include('include/_header') %>
<!-- /include header -->

<!-- Main Site -->
<main>
  <img
    src="/img/SE-GitHub-image.png"
    alt="Huskie code logo"
    width="100"
    height="100"
  />
  <h1>Display ticket</h1>
  <div>
    <pre><%- JSON.stringify(student, null, 2) %></pre>
    <svg id = "tbarcode"></svg>
  </div>
</main>
<!-- /Main Site -->
<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.4/dist/JsBarcode.all.min.js"></script>
<script >

JsBarcode("#tbarcode", "<%- student.id %>");


</script>

<script>
document.addEventListener("keydown", function(event) {
    // Check if the key pressed is Enter (key code 13)
    if (event.keyCode === 13) {
        // Barcode termination character detected, handle barcode data
        var barcodeData = document.getElementById("barcodeInput").value;
        console.log("Barcode scanned:", barcodeData);

        // Clear the input for the next scan
        document.getElementById("barcodeInput").value = "";
    } else {
        // Append the pressed key to the barcode input
        var key = event.key;
        document.getElementById("barcodeInput").value += key;
    }
});
</script>

<!-- Input field to capture barcode data -->
<input type="text" id="barcodeInput" style="display: none;">

<!-- Focus the input field initially -->
<script>
    document.getElementById("barcodeInput").focus();
</script>


<!-- include footer -->
<%- include('include/_footer') %>
<!-- /include footer -->